# POOP-financial-control

Backend-приложение для управления личными финансами. Позволяет
пользователям учитывать доходы и расходы, устанавливать бюджеты по
категориям и получать структурированную статистику.

## Возможности

-   Авторизация пользователей: регистрация и вход
-   Учет операций: доходы, фактические и планируемые расходы
-   Категории: система для бюджетирования
-   Контроль бюджета: предупреждения о превышении лимитов
-   Аналитика: статистика по категориям
-   Экспорт и импорт данных в JSON

## Установка и запуск

### Требования

-   Java 17+\
-   Maven 3.6+

### Сборка и запуск

``` bash
# Клонирование репозитория
git clone <repository-url>
cd POOP-financial-control

# Сборка
mvn clean compile

# Запуск приложения
mvn exec:java -Dexec.mainClass=org.Main

# Или запуск с JAR
mvn clean package
java -jar target/POOP-financial-control-1.0.jar
```

## CLI-взаимодействие

Для справки по командам:

``` bash
help [<команда>]
```

### Авторизация

| Команда      | Параметры                     | Описание                   |
|--------------|--------------------------------|----------------------------|
| login        | -u {логин} -p {пароль}         | Вход                       |
| registration | -u {логин} -p {пароль}         | Регистрация                |
| logout       | -                              | Выход                      |


### Управление финансами

При использовании "add_income", "add_outcome", "set_budget" приложение автоматически создает новую категорию, указанную в этих командах.

| Команда       | Параметры                     | Описание             |
|---------------|-------------------------------|----------------------|
| status        | -                             | Статус бюджета       |
| add_income    | -c {категория} -a {сумма}     | Добавить доход       |
| add_outcome   | -c {категория} -a {сумма}     | Добавить расход      |
| set_budget    | -c {категория} -a {сумма}     | Установить бюджет    |


### Просмотр операций

| Команда        | Параметры                                        | Описание            |
|----------------|---------------------------------------------------|---------------------|
| actions list   | -c {категория} -t {тип} -n {N} -from {дата} -to {дата}  | Список операций     |
| actions remove | -i {id}                                        | Удаление операции   |

* тип - income, outcome
* n - количество
* -from/-to - дата в формате ДД.ММ.ГГГГ ЧЧ:мм. Часы и минуты функционально.

### Управление категориями

| Команда         | Параметры                         | Описание            |
|-----------------|------------------------------------|---------------------|
| category list   | -t {тип}                           | Список категорий    |
| category remove | -c {категория} -t {тип}            | Удалить категорию   |
| category edit   | -c {категория} -t {тип} -n {имя}   | Переименовать       |

### Экспорт и импорт

| Команда | Параметры      | Описание            |
|---------|-----------------|---------------------|
| export  | -f {файл}       | Экспорт JSON        |
| import  | -f {файл}       | Импорт JSON         |


### Выход

``` bash
exit
q
```

## Структура проекта

    ├── data                      # данные о пользователях
    ├── snapshot
    │   ├── export                # экспортируемые данные
    │   └── import                # импортируемые данные
    ├── src
    │   ├── main
    │   │   ├── java
    │   │   │   └── org
    │   │   │       ├── exception     # пользовательские исключения
    │   │   │       ├── model         # модели данных
    │   │   │       ├── service       # бизнес-логика
    │   │   │       ├── storage       # работа с файлами
    │   │   │       └── terminal      # CLI-интерфейс
    │   │   └── resources             # ресурсы приложения
    │   └── test
    │       └── java
    │           └── org
    │               ├── integration   # интеграционные тесты
    │               ├── model         # тестирование моделей
    │               └── service       # тестирование сервисов
    └── target                      # сборочные артефакты

## Тестирование

``` bash
# Запуск тестов
mvn test

# Отчет о покрытии
mvn test jacoco:report
```

## Пример работы

```bash
# 1. Начальная настройка
login -u user -p pass
add_income -c "Зарплата" -a 50000
set_budget -c "Еда" -a 15000

# 2. Работа с транзакциями  
add_outcome -c "Еда" -a 5000
add_outcome -c "Еда" -a 3000
actions list
# Вывод: 2 транзакции в категории "Еда"

# 3. Удаление ошибочной транзакции
actions remove -i 2
actions list  
# Вывод: осталась 1 транзакция

# 4. Редактирование категорий
category edit -c "Еда" -n "Продукты" -t outcome
add_outcome -c "Продукты" -a 2000

# 5. Просмотр состояния
status
# 6. Экспорт состояния кошелька для пользователя "user"
export -f backup.json

# 7. Выход
exit
```

## Конфигурация

Файл `src/main/java/resources/config.properties`:

    user.file=data/users.json
    export.path=snapshot/export
    import.path=snapshot/import

## Технологии

-   Java 17\
-   Maven\
-   Jackson\
-   JUnit 5\
-   Mockito
